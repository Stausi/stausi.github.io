import ResourceLinks from '@components/resource-links';
import { Steps, Tabs, Tab } from 'nextra-theme-docs';
import { Callout } from 'nextra/components';

# Teams Script

<ResourceLinks link="https://shop.stausi.com/package/6528185" />

<Callout type="info">
These exports only works server sided!
</Callout>

## Team Data Structure

- owner: `table`
    - source: `number`
    - identifier: `string`
    - name: `string`
- uuid: `string`
- name: `string`
- members: `table`
    - source: `number`
    - identifier: `string`
    - name: `string`
- invites: `table`
    - source: `number`
    - identifier: `string`
    - name: `string`

## Get Team Exports

<Tabs items={["uuid", "source", "identifier"]}>
    <Tab>
        Returns the team from the Team UUID

        ```lua
        local team = exports.st_teams:getTeamFromUUID(uuid)
        ```

        - uuid: `string`

    </Tab>

    <Tab>
        Returns the team from the source of a user

        ```lua
        local team = exports.st_teams:getTeamFromSource(source)
        ```

        - source: `number`

    </Tab>

    <Tab>
        Returns the team from the users identifier (steam)

        ```lua
        local team = exports.st_teams:getTeamFromIdentifier(identifier)
        ```

        - identifier: `string`

    </Tab>
</Tabs>

## LeaveTeam

Makes the player leaves the team

```lua
exports.st_teams:leaveTeam(source)
```

- source: `number`

## AddPlayerToTeam

Makes the player leaves the team

```lua
exports.st_teams:AddPlayerToTeam(source, target)
```

- source: `number` (The user which adds the player to the team)
- target: `number` (The user which should join the team)

## IsPlayerInTeam

Returns if the user is in a team or not

```lua
local isInTeam = exports.st_teams:IsPlayerInTeam(source)
```

- source: `number`

## createTeam

Creates a team for the user, with options for either a custom-specified team name or an automatically generated one.

```lua
local isInTeam = exports.st_teams:createTeam(source, name)
```

- `source`: `number`
- `label`: `string | false`
  - Provide a `string` to set a custom team name.
  - If `false`, a default name will be generated in the format "Generated Name #1".

## Example

With a custom-generated name:

```lua
local RandomName = 'Random ' .. math.random(1,10)
exports.st_teams:createTeam(source, RandomName, function(success)
    if success then
        print("Team created for player " .. source)
    else
        print("Failed to create team for player " .. source .. ". They may already be in a team.")
    end
end)
```